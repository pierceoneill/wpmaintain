import{V as n,a as b,n as o,m as r,i as C}from"./chunks/vendor-b19955ae.min.js";import{R as y,D as P}from"./chunks/date-intervals-5f189ead.min.js";import{W as D}from"./chunks/WidgetReportError-47a2a782.min.js";import{M as E,s as _}from"./chunks/monsterinsights-helper-plugin-9734771f.min.js";const A=s=>new Promise(t=>{let e=new FormData,c=n.prototype.$mi.page_id?n.prototype.$mi.page_id:window.location.pathname;e.append("action","monsterinsights_pageinsights_refresh_report"),e.append("security",n.prototype.$mi.nonce),e.append("report","pageinsights"),e.append("post_id",c),e.append("json",1),b.post(n.prototype.$mi.ajax,e).then(l=>{t(l.data)}).catch(function(l){s.dispatch("$_app/block",!1,{root:!0}),l.response})}),R={fetchReportData:A},T=s=>new Promise(t=>{s.dispatch("$_queue/add",()=>R.fetchReportData(s).then(function(e){if(e.data.message==="license_level"){t(!1);return}e.success?(s.commit("UPDATE_REPORT_DATA",{report:"pageinsights",data:e.data}),t(!0)):(n.prototype.$mi_error_toast(!1,e.data.message,e.data.footer),t(!1))}),{root:!0})}),F={getReportData:T},U=s=>s.date,I=s=>s.pageinsights,O=s=>s.loaded,S=s=>s.error,M=s=>s.noauth,k={date:U,pageinsights:I,loaded:O,error:S,noauth:M},L=(s,t)=>{t.report&&t.data&&s[t.report]&&n.set(s,t.report,t.data)},N=(s,t)=>{t.start&&t.end&&(n.set(s.date,"start",t.start),n.set(s.date,"end",t.end))},V=(s,t)=>{n.set(s.date,"interval",t)},B=(s,t)=>{s.loaded=t},H=(s,t)=>{s.error=t},W=s=>{s.noauth=!0,s.loaded=!0},j={UPDATE_REPORT_DATA:L,UPDATE_DATE:N,UPDATE_INTERVAL:V,UPDATE_LOADED:B,SET_ERROR:H,ENABLE_NOAUTH:W},z={loaded:!1,pageinsights:{},error:!1,noauth:!1},G={namespaced:!0,state:z,actions:F,getters:k,mutations:j},K={name:"FrontendStatsColumn",props:{extraClass:{type:String,default:""},label:String,value:[String,Number]},computed:{columnClass(){return"monsterinsights-stats-column "+this.extraClass}}};var Y=function(){var t=this,e=t._self._c;return e("div",{class:t.columnClass},[t.label?e("div",{staticClass:"monsterinsights-stats-label",domProps:{textContent:t._s(t.label)}}):t._e(),t.value?e("div",{staticClass:"monsterinsights-stats-value",domProps:{innerHTML:t._s(t.value)}}):t._e(),t._t("default")],2)},q=[],Z=o(K,Y,q,!1,null,null,null,null);const p=Z.exports,{__:J}=wp.i18n,Q={name:"NotificationsIndicator",data(){return{text_view_notifications:J("View notifications","ga-premium")}},computed:{...r({notifications:"$_notifications/notifications",view_url:"$_notifications/view_url",sidebar_url:"$_notifications/sidebar_url"}),has_notifications(){return this.notifications&&this.notifications.length>0}}};var X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"monsterinsights-notifications-indicator"},[e("a",{attrs:{href:t.sidebar_url,title:t.text_view_notifications}},[e("svg",{attrs:{width:"35",height:"39",viewBox:"0 0 35 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M17.6898 39C20.3431 39 22.4954 36.8177 22.4954 34.125H12.8841C12.8841 36.8177 15.0364 39 17.6898 39ZM33.8706 27.5963C32.4192 26.015 29.7035 23.6361 29.7035 15.8438C29.7035 9.9252 25.6108 5.18731 20.0922 4.02492V2.4375C20.0922 1.09154 19.0164 0 17.6898 0C16.3631 0 15.2873 1.09154 15.2873 2.4375V4.02492C9.76874 5.18731 5.67602 9.9252 5.67602 15.8438C5.67602 23.6361 2.96031 26.015 1.50893 27.5963C1.05818 28.0876 0.858356 28.6749 0.862112 29.25C0.870376 30.4992 1.83721 31.6875 3.27357 31.6875H32.1059C33.5423 31.6875 34.5099 30.4992 34.5174 29.25C34.5212 28.6749 34.3213 28.0869 33.8706 27.5963Z",fill:"#393F4C"}})]),t.has_notifications?e("span",{staticClass:"monsterinsights-notifications-unread",domProps:{textContent:t._s(t.notifications.length)}}):t._e()])])},tt=[],et=o(Q,X,tt,!1,null,null,null,null);const h=et.exports,{__:i}=wp.i18n,st={name:"FrontendStatsPageInsights",components:{NotificationsIndicator:h,FrontendStatsColumn:p},data(){return{text_insights_for:i("Last 30 Days Insights for:","ga-premium"),text_entrances:i("Entrances","ga-premium"),text_page_views:i("Page Views","ga-premium"),text_time_on_page:i("Time on Page","ga-premium"),text_page_load_time:i("Page Load Time","ga-premium"),text_total_users:i("Total Users","ga-premium"),text_exits:i("Exits","ga-premium"),text_30days:i("Last 30 Days","ga-premium"),text_yesterday:i("Yesterday","ga-premium"),interval:"30days",page_title:this.$mi.page_title}},computed:{...r({reportdata:"$_frontend/pageinsights"}),displayData(){let s={entrances:"0",pageviews:"0",timeonpage:"0",pageloadtime:"0",exits:"0",totalusers:"0"};return this.reportdata[this.interval]&&(s=this.reportdata[this.interval]),s}},methods:{hasData(s){return this.reportdata[this.interval]&&typeof this.reportdata[this.interval][s]<"u"}},mounted(){if(!this.$mi.authed){this.$store.commit("$_frontend/ENABLE_NOAUTH");return}Object.keys(this.reportdata).length!==0&&this.reportdata.constructor===Object||this.$store.dispatch("$_frontend/getReportData").then(()=>{this.$store.commit("$_frontend/UPDATE_LOADED",!0)})}};var nt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"monsterinsights-frontend-stats-inner"},[e("frontend-stats-column",{attrs:{label:t.text_insights_for,value:t.page_title,"extra-class":"monsterinsights-stats-column-title"}}),e("frontend-stats-column",{attrs:{label:t.text_page_views,value:t.displayData.pageviews}}),e("frontend-stats-column",{attrs:{label:t.text_time_on_page,value:t.displayData.timeonpage}}),e("frontend-stats-column",{attrs:{label:t.text_entrances,value:t.displayData.entrances}}),e("frontend-stats-column",{attrs:{label:t.text_total_users,value:t.displayData.totalusers}}),t.hasData("exits")?e("frontend-stats-column",{attrs:{label:t.text_exits,value:t.displayData.exits}}):t._e(),e("frontend-stats-column",{staticClass:"monsterinsights-frontend-column-notifications"},[e("notifications-indicator")],1)],1)},it=[],at=o(st,nt,it,!1,null,null,null,null);const ot=at.exports,{__:u}=wp.i18n,rt={name:"FrontendUpsell",data(){return{is_admin:this.$mi.is_admin,text_button:u("Upgrade to PRO","ga-premium"),text_install:u("Activate Page Insights Addon","ga-premium"),text_view_reports:u("View All Reports","ga-premium"),install_url:this.$mi.addons_url}},computed:{...r({license:"$_license/license",license_network:"$_license/license_network",addons:"$_addons/addons"}),upgradeUrl(){return this.$getUpgradeUrl("frontend-reports","admin-bar")},licenseType(){return this.$mi.network?this.license_network.type:this.license.type},reportsUrl(){return this.$mi.reports_url},isPageInsights(){return!!(typeof this.addons["page-insights"]<"u"&&this.addons["page-insights"].active)},canManageOptions(){return!!(this.$mi.roles_manage_options&&this.$mi.roles_manage_options.length!==0||this.$mi.roles_view_reports&&this.$mi.roles_view_reports.length!==0)}}};var lt=function(){var t=this,e=t._self._c;return e("div",[t.is_admin?e("a",{staticClass:"monsterinsights-button",attrs:{href:t.reportsUrl},domProps:{textContent:t._s(t.text_view_reports)}}):t.licenseType==="basic"?e("a",{staticClass:"monsterinsights-button",attrs:{target:"_blank",rel:"noopener",href:t.upgradeUrl},domProps:{textContent:t._s(t.text_button)}}):!t.is_admin&&t.canManageOptions&&!t.isPageInsights?e("a",{staticClass:"monsterinsights-button",attrs:{href:t.install_url},domProps:{textContent:t._s(t.text_install)}}):!t.is_admin&&!t.canManageOptions?e("a",{staticClass:"monsterinsights-button",attrs:{href:t.reportsUrl},domProps:{textContent:t._s(t.text_view_reports)}}):t._e()])},_t=[],dt=o(rt,lt,_t,!1,null,null,null,null);const ct=dt.exports,{__:a}=wp.i18n,ut={name:"FrontendStatsGeneral",components:{NotificationsIndicator:h,FrontendUpsell:ct,FrontendStatsColumn:p},data(){return{text_insights_for:a("Last 30 Days Insights for:","ga-premium"),text_your_website:a("Your Website","ga-premium"),text_sessions:a("Sessions","ga-premium"),text_pageviews:a("Pageviews","ga-premium"),text_session_duration:a("Avg. Duration","ga-premium"),text_total_users:a("Total Users","ga-premium")}},computed:{...r({overview:"$_reports/overview",addons:"$_addons/addons"}),text_upsell_title(){return this.$mi.is_admin||this.addons["page-insights"]&&this.addons["page-insights"].active?a("More data is available","ga-premium"):a("Want to see page-specific stats?","ga-premium")},hasTotalUsersData(){return typeof this.overview.infobox.totalusers<"u"&&typeof this.overview.infobox.totalusers.value<"u"}},mounted(){if(!this.$mi.authed){this.$store.commit("$_frontend/ENABLE_NOAUTH");return}this.$store.dispatch("$_reports/getReportData","overview").then(()=>{this.$store.commit("$_frontend/UPDATE_LOADED",!0)})}};var mt=function(){var t=this,e=t._self._c;return t.overview.infobox?e("div",{staticClass:"monsterinsights-frontend-stats-inner"},[e("frontend-stats-column",{attrs:{label:t.text_insights_for,value:t.text_your_website}}),e("frontend-stats-column",{attrs:{label:t.text_sessions,value:t.overview.infobox.sessions.value}}),e("frontend-stats-column",{attrs:{label:t.text_pageviews,value:t.overview.infobox.pageviews.value}}),e("frontend-stats-column",{attrs:{label:t.text_session_duration,value:t.overview.infobox.duration.value}}),t.hasTotalUsersData?e("frontend-stats-column",{attrs:{label:t.text_total_users,value:t.overview.infobox.totalusers.value}}):t._e(),e("frontend-stats-column",{staticClass:"monsterinsights-frontend-column-button",attrs:{label:t.text_upsell_title}},[e("frontend-upsell")],1),e("frontend-stats-column",{staticClass:"monsterinsights-frontend-column-notifications"},[e("notifications-indicator")],1)],1):t._e()},pt=[],ht=o(ut,mt,pt,!1,null,null,null,null);const ft=ht.exports,gt={name:"FrontendStatsContent",components:{FrontendStatsGeneral:ft,FrontendStatsPageInsights:ot},data(){return{loaded:!1}},computed:{...r({license:"$_license/license",license_network:"$_license/license_network",addons:"$_addons/addons"})},mounted(){if(Object.keys(this.addons).length!==0&&this.addons.constructor===Object)return this.loaded=!0;this.$store.dispatch("$_license/getLicense"),this.$store.dispatch("$_addons/getAddons").then(()=>{this.loaded=!0})},methods:{showPageInsights(){return this.addons["page-insights"]&&!this.$mi.is_admin?this.addons["page-insights"].active:!1}}};var vt=function(){var t=this,e=t._self._c;return t.loaded?e("div",{staticClass:"monsterinsights-content-pro"},[t.showPageInsights()?e("frontend-stats-page-insights"):e("frontend-stats-general")],1):t._e()},$t=[],wt=o(gt,vt,$t,!1,null,null,null,null);const xt=wt.exports,{__:bt}=wp.i18n,Ct={name:"FrontendPoweredBy",data(){return{text_powered_by:bt("Powered by MonsterInsights","ga-premium"),upgrade_url:this.$getUpgradeUrl("admin-bar","powered-by")}}};var yt=function(){var t=this,e=t._self._c;return e("a",{staticClass:"monsterinsights-powered-by",attrs:{href:t.upgrade_url},domProps:{textContent:t._s(t.text_powered_by)}})},Pt=[],Dt=o(Ct,yt,Pt,!1,null,null,null,null);const Et=Dt.exports,{__:d}=wp.i18n,At={name:"FrontendNoAuth",data(){return{text_no_auth:d("Please Setup Website Analytics to See Audience Insights","ga-premium"),text_auth_label:d("MonsterInsights, the #1 WordPress Analytics Plugin, helps you connect your website with Google Analytics, so you can see how people find and use your website. Over 3 million website owners use MonsterInsights to see the stats that matter and grow their business.","ga-premium"),text_wizard:d("Connect MonsterInsights and Setup Website Analytics","ga-premium"),text_learn:d("Learn More","ga-premium"),wizard_url:this.$mi.wizard_url,learn_link:this.$mi.getting_started_url}}};var Rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"monsterinsights-not-authenticated-notice"},[e("h3",{domProps:{textContent:t._s(t.text_no_auth)}}),e("div",{staticClass:"monsterinsights-settings-input monsterinsights-settings-input-authenticate"},[e("p",{domProps:{textContent:t._s(t.text_auth_label)}}),e("div",[e("a",{staticClass:"monsterinsights-wp-button monsterinsights-wp-button-primary",attrs:{href:t.wizard_url},domProps:{textContent:t._s(t.text_wizard)}}),e("a",{staticClass:"monsterinsights-wp-button",attrs:{href:t.learn_link},domProps:{textContent:t._s(t.text_learn)}})])])])},Tt=[],Ft=o(At,Rt,Tt,!1,null,null,null,null);const Ut=Ft.exports,{__:It}=wp.i18n,Ot={name:"ModuleFrontendReports",components:{FrontendNoAuth:Ut,FrontendPoweredBy:Et,WidgetReportError:D,FrontendStatsContent:xt},data(){return{statsVisible:!1,page_id:this.$mi.page_id,text_insights:It("Insights","ga-premium")}},created(){const s="$_reports";s in this.$store._modules.root._children||this.$store.registerModule(s,y);const t="$_frontend";t in this.$store._modules.root._children||this.$store.registerModule(t,G)},computed:{...r({reportdata:"$_frontend/pageinsights",loaded:"$_frontend/loaded",error:"$_frontend/error",noauth:"$_frontend/noauth"}),toggleButtonClass(){let s="ab-item ab-empty-item monsterinsights-toggle";return this.statsVisible&&(s+=" monsterinsights-toggle-active"),s},has_notifications(){return this.notifications&&this.notifications.length>0}},methods:{toggleStatsVisibility(){this.statsVisible=!this.statsVisible}}};var St=function(){var t=this,e=t._self._c;return e("li",{staticClass:"monsterinsights-adminbar-menu-item",attrs:{id:"wp-admin-bar-monsterinsights_frontend_button"}},[e("div",{class:t.toggleButtonClass,on:{click:t.toggleStatsVisibility}},[e("span",{staticClass:"ab-icon dashicons-before dashicons-chart-bar"}),e("span",{staticClass:"monsterinsights-admin-bar-handle-text",domProps:{textContent:t._s(t.text_insights)}}),t.has_notifications?e("span",{staticClass:"monsterinsights-menu-notification-indicator",domProps:{textContent:t._s(t.notifications.length)}}):t._e()]),t.statsVisible?e("div",{staticClass:"monsterinsights-frontend-stats"},[t.noauth?e("frontend-no-auth"):t.error?e("widget-report-error",{attrs:{error:t.error}}):e("frontend-stats-content"),t.loaded?t._e():e("div",{staticClass:"monsterinsights-frontend-stats-loading"},[e("span",{staticClass:"monsterinsights-frontend-spinner"})]),e("frontend-powered-by")],1):t._e()])},Mt=[],kt=o(Ot,St,Mt,!1,null,null,null,null);const Lt=kt.exports;const{__:m}=wp.i18n,Nt={install(s,{store:t}){s.prototype.$mi_loading_toast||(s.prototype.$mi_loading_toast=function(){}),s.prototype.$mi_error_toast||(s.prototype.$mi_error_toast=function(e){let{type:c="error",customContainerClass:l="monsterinsights-swal",allowOutsideClick:f=!1,allowEscapeKey:g=!1,allowEnterKey:v=!1,title:$=m("Error","ga-premium"),html:w=m("Please try again.","ga-premium"),footer:x=!1}=e;e={type:c,customContainerClass:l,allowOutsideClick:f,allowEscapeKey:g,allowEnterKey:v,title:$,html:w,footer:x},t.commit("$_frontend/SET_ERROR",{title:e.title,content:e.html,footer:e.footer})}),s.prototype.$mi_intervals=function(){return P}}};window.addEventListener("load",function(){const s=document.getElementById("wp-admin-bar-monsterinsights_frontend_button");n.config.productionTip=!1,s&&({}.NODE_ENV!=="production"&&(n.config.devtools=!0,n.config.performance=!0),C({ctrl:!0}),n.use(E),n.use(Nt,{store:_}),new n({store:_,mounted:()=>{window.pagenow&&window.pagenow!=="dashboard"&&window.pagenow!=="toplevel_page_monsterinsights_reports"&&_.dispatch("$_queue/add",()=>_.dispatch("$_notifications/getNotifications"))},render:t=>t(Lt)}).$mount(s))});
