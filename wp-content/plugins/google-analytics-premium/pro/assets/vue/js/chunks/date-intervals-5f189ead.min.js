import{V as a,a as v,h as r}from"./vendor-b19955ae.min.js";import{c as n}from"./monsterinsights-helper-plugin-9734771f.min.js";const{__:w,sprintf:A}=wp.i18n,T=(t,e,i,d)=>new Promise(s=>{let c=new FormData;c.append("action","monsterinsights_vue_get_report_data"),c.append("nonce",a.prototype.$mi.nonce),c.append("report",e),c.append("start",i),c.append("end",d),t.getters.date.compareReport&&(c.append("compare_report",!0),c.append("compare_end",t.getters.date.compareEnd),c.append("compare_start",t.getters.date.compareStart)),v.post(a.prototype.$mi.ajax,c).then(m=>{s(m.data)}).catch(function(m){t.dispatch("$_app/block",!1,{root:!0});const u=a.prototype.$getUrl("admin-notices","error-verifying-license","https://www.monsterinsights.com/my-account/support");if(m.response){const p=m.response;return a.prototype.$mi_error_toast({title:A(w("Can't load report data. Error: %1$s, %2$s. Please try again in a few minutes. If the issue persists, please %3$scontact our support%4$s team.","ga-premium"),p.status,p.statusText,'<a target="_blank" href="'+u+'">',"</a>")})}a.prototype.$swal.hideLoading(),a.prototype.$mi_error_toast({allowOutsideClick:!0,allowEscapeKey:!0,title:w("Error loading report data","ga-premium"),html:m.message})})}),D=t=>{if(typeof t<"u"){const e=parseInt(t.toString().replace(".",""),10);return e.toString().length===1?parseInt(e===1?e+"00":e+"0"):e}},b=t=>{if(typeof t<"u"){let e={};return Object.keys(t).forEach(function(i){let d=i.toString().split("-").join("_");e[d]=t[i]}),e}},$={fetchReportData:T,getFormattedScore:D,keysReplaceHyphensWithUnderscores:b},{__:o,sprintf:_}=wp.i18n,L=(t,e)=>{const i=["overview","site_summary","yearinreview"];return!a.prototype.$isPro()&&!i.includes(e)?null:new Promise(d=>{if(!a.prototype.$mi.authed)return d(!1),t.commit("ENABLE_BLUR"),t.commit("ENABLE_NOAUTH"),!1;if(t.state[e]&&t.state[e].reportcurrentrange&&!t.state.date.compareReport&&t.state[e].reportcurrentrange.startDate===t.state.date.start&&t.state[e].reportcurrentrange.endDate===t.state.date.end)return d(!1),t.commit("DISABLE_BLUR"),!1;a.prototype.$mi_loading_toast(),t.commit("ENABLE_BLUR"),t.dispatch("$_queue/add",()=>$.fetchReportData(t,e,t.state.date.start,t.state.date.end).then(function(s){if(t.commit("SET_IS_LOADED"),s.data.message==="license_level"){g(t),d(!1);return}if(s.success)g(t),t.commit("DISABLE_BLUR"),t.commit("UPDATE_REPORT_DATA",{report:e,data:s.data}),d(!0);else{if(s.data.message==="invalid_grant"){g(t),d(!1),t.commit("ENABLE_REAUTH");return}if(s.data.footer&&s.data.footer==="install_addon"){let c=t.state.required_addon?t.state.required_addon:e;R(t,c).then(function(m){t.rootState.$_widget&&(t.commit("DISABLE_BLUR"),t.commit("$_widget/UPDATE_LOADED",!0,{root:!0}));let u=o(m?"activate":"install","ga-premium");a.prototype.$mi_error_toast({title:!1,html:_(s.data.message,u),footer:'<a href="'+a.prototype.$mi.addons_url+'">'+o("Visit addons page","ga-premium")+"</a>",report:e}),a.prototype.$swal({icon:"error",customClass:{container:"monsterinsights-swal"},title:o("Report Unavailable","ga-premium"),html:_(s.data.message,u),allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!1,showCancelButton:!0,confirmButtonText:_(o("%s Addon","ga-premium"),u.charAt(0).toUpperCase()+u.slice(1)),cancelButtonText:o("Dismiss","ga-premium")}).then(function(p){p.value&&(m?y(t,t.rootState.$_addons.addons[c]):E(t,c))})})}else s.data.footer&&s.data.footer.indexOf("#/ecommerce")>0?(d(!1),a.prototype.$mi_error_toast({title:!1,html:s.data.message,report:e,showCancelButton:!0,cancelButtonText:o("Go Back To Reports","ga-premium"),confirmButtonText:o("Enable Enhanced eCommerce","ga-premium")}).then(function(c){c.value&&(window.location=s.data.footer)})):s.data.type&&s.data.type==="expired_license"?(d(!1),a.prototype.$mi_error_toast({type:"",customClass:{container:"monsterinsights-expired-license-alert-toast"},confirmButtonText:"",title:!1,html:s.data.message,footer:s.data.footer,report:e})):(d(!1),a.prototype.$mi_error_toast({title:!1,html:s.data.message,footer:s.data.footer,report:e,onClose:()=>{if(!s.data.type||s.data.type!=="INVALID_DATE_RANGE"||t.state.date==="last30days")return;const c=a.prototype.$mi_intervals().last30days;t.commit("UPDATE_INTERVAL","last30days"),t.commit("UPDATE_DATE",{start:c.start.format("YYYY-MM-DD"),end:c.end.format("YYYY-MM-DD")}),t.dispatch("getReportData",t.state.activeReport)}}))}}),{root:!0})})};function R(t,e){return new Promise(function(i){t.dispatch("$_addons/getAddons","",{root:!0}).then(function(){t.rootState.$_addons.addons[e]&&t.rootState.$_addons.addons[e].installed?i(!0):i(!1)}).catch(function(){i(!1),h()})})}function E(t,e){a.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:o("Installing Addon","ga-premium"),html:o("Please wait","ga-premium"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){a.prototype.$swal.showLoading(),t.dispatch("$_addons/installAddon",t.rootState.$_addons.addons[e],{root:!0}).then(function(){y(t,t.rootState.$_addons.addons[e])}).catch(function(){h()})}})}function y(t,e){a.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:o("Activating Addon","ga-premium"),html:o("Please wait","ga-premium"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){a.prototype.$swal.showLoading()}}),t.dispatch("$_addons/activateAddon",e,{root:!0}).then(function(){a.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:o("Addon Activated","ga-premium"),html:o("Loading report data","ga-premium"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){a.prototype.$swal.showLoading(),setTimeout(function(){window.location.reload()},1e3)}})}).catch(function(i){h(i)})}function h(t){let e=o("Please activate manually","ga-premium");t.response&&(e=_(o("Error: %1$s, %2$s","ga-premium"),t.response.status,t.response.statusText)),a.prototype.$swal({icon:"error",customClass:{container:"monsterinsights-swal"},title:o("Error Activating Addon","ga-premium"),html:e,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showCancelButton:!0,confirmButtonText:o("View Addons","ga-premium"),cancelButtonText:o("Dismiss","ga-premium")}).then(function(i){i.value&&(window.location=a.prototype.$mi.addons_url,a.prototype.$swal({icon:"info",customClass:{container:"monsterinsights-swal"},title:o("Redirecting","ga-premium"),html:o("Please wait","ga-premium"),allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:function(){a.prototype.$swal.showLoading()}}))})}function g(t){t.rootState.$_widget||typeof a.prototype.$swal=="function"&&a.prototype.$swal.close()}const S={getReportData:L,installAddon:E,activateAddon:y},O=t=>t.yearinreview_data,B=t=>t.activeReport,C=t=>t.isLoaded,U=t=>t.blur,Y=t=>t.mobileTableExpanded,P=t=>t.overview,k=t=>t.site_summary,I=t=>t.publisher,M=t=>t.ecommerce,N=t=>t.ecommerce_coupons,K=t=>t.ecommerce_funnel,q=t=>t.queries,V=t=>t.dimensions,H=t=>t.forms,F=t=>t.realtime,G=t=>t.yearinreview,W=t=>t.sitespeed,X=t=>t.sitespeedmobile,j=t=>t.noauth,Q=t=>t.reauth,z=t=>t.media,J=t=>t.countries,Z=t=>t.traffic_overview,x=t=>t.traffic_landing_pages,tt=t=>t.traffic_technology,et=t=>t.traffic_campaign,at=t=>t.traffic_source_medium,rt=t=>t.traffic_social,st=t=>t.engagement_pages,ot=()=>n("overview"),nt=()=>n("ecommerce"),it=()=>n("ecommerce_coupons"),ct=()=>n("dimensions"),dt=()=>n("countries"),mt=()=>n("traffic_overview"),lt=()=>n("traffic_technology"),ut=()=>n("traffic_landing_pages"),pt=()=>n("traffic_campaign"),ft=()=>n("traffic_source_medium"),_t=()=>n("traffic_social"),gt=()=>n("publisher"),yt=()=>n("engagement_pages"),ht=()=>n("queries"),wt=()=>n("forms"),Et=()=>n("realtime"),vt=()=>n("sitespeed"),At=()=>n("media"),Tt=()=>n("ecommerce_funnel");function f(t,e){return t.format("YYYYMMDD")===e.format("YYYYMMDD")?t.format("MMMM D, YYYY"):t.format("MMMM D")+" - "+e.format("MMMM D, YYYY")}function Dt(t){let e=t.date,i=a.prototype.$mi_intervals();if(i[e.interval]){let d=i[e.interval];e.intervalText=f(d.start,d.end),e.intervalCompareText=f(d.compareStart,d.compareEnd)}else e.intervalText=f(r(e.start),r(e.end)),e.intervalCompareText=f(r(e.compareStart),r(e.compareEnd));return e}const bt={yearinreview_data:O,date:Dt,activeReport:B,isLoaded:C,blur:U,mobileTableExpanded:Y,overview:P,publisher:I,ecommerce:M,ecommerce_coupons:N,ecommerce_funnel:K,queries:q,dimensions:V,forms:H,realtime:F,noauth:j,yearinreview:G,reauth:Q,sitespeed:W,sitespeedmobile:X,site_summary:k,media:z,countries:J,traffic_overview:Z,traffic_landing_pages:x,traffic_technology:tt,traffic_campaign:et,traffic_source_medium:at,traffic_social:rt,engagement_pages:st,demo_overview:ot,demo_ecommerce:nt,demo_ecommerce_coupons:it,demo_dimensions:ct,demo_countries:dt,demo_traffic_overview:mt,demo_traffic_technology:lt,demo_traffic_landing_pages:ut,demo_traffic_campaign:pt,demo_traffic_source_medium:ft,demo_traffic_social:_t,demo_publisher:gt,demo_engagement_pages:yt,demo_queries:ht,demo_forms:wt,demo_realtime:Et,demo_sitespeed:vt,demo_media:At,demo_ecommerce_funnel:Tt},$t=(t,e)=>{e.report&&e.data&&t[e.report]&&a.set(t,e.report,e.data)},Lt=(t,e)=>{e.start&&e.end&&(a.set(t.date,"start",e.start),a.set(t.date,"end",e.end))},Rt=(t,e)=>{a.set(t.date,"interval",e)},St=(t,e)=>{a.set(t.date,"text",e)},Ot=(t,e)=>{t.activeReport=e},Bt=t=>{t.isLoaded=!0},Ct=t=>{t.blur=!0},Ut=t=>{t.blur=!1},Yt=t=>{t.mobileTableExpanded=!0},Pt=t=>{t.mobileTableExpanded=!1},kt=t=>{t.noauth=!0},It=t=>{t.reauth=!0},Mt=(t,e)=>{t.required_addon=e},Nt=(t,e)=>{t.date={...t.date,...e}},Kt={UPDATE_REPORT_DATA:$t,UPDATE_DATE:Lt,UPDATE_ACTIVE_REPORT:Ot,UPDATE_INTERVAL:Rt,UPDATE_DATE_TEXT:St,SET_IS_LOADED:Bt,ENABLE_BLUR:Ct,DISABLE_BLUR:Ut,EXPAND_TABLES:Yt,CONTRACT_TABLES:Pt,ENABLE_NOAUTH:kt,ENABLE_REAUTH:It,UPDATE_REQUIRED_ADDON:Mt,UPDATE_DATE_STORE:Nt},qt={yearinreview_data:window.monsterinsights.yearinreview,date:{start:"",end:"",interval:"last30days",text:"",compareText:"",compareReport:!1,compareStart:"",compareEnd:""},blur:!1,activeReport:"overview",mobileTableExpanded:!1,overview:{},site_summary:{},publisher:{},ecommerce:{},ecommerce_coupons:{},ecommerce_funnel:{funnel_table:{none:[]},funnel_chart:[]},queries:{},dimensions:{},forms:{},realtime:{},yearinreview:{},sitespeed:{},sitespeedmobile:{},noauth:!1,reauth:!1,isLoaded:!1,media:{line_chart_report:{},video_details_rows:[]},countries:{},traffic_overview:{},traffic_landing_pages:{},traffic_technology:{},traffic_campaign:{},traffic_source_medium:{},traffic_social:{sessions_chart:{}},engagement_pages:{},required_addon:null},Ft={namespaced:!0,state:qt,actions:S,getters:bt,mutations:Kt},{__:l}=wp.i18n,Gt={today:{text:l("Today","ga-premium"),start:r(),end:r(),interval:"today",compareStart:r().subtract(1,"days"),compareEnd:r().subtract(1,"days")},yesterday:{text:l("Yesterday","ga-premium"),start:r().subtract(1,"days"),end:r().subtract(1,"days"),interval:"yesterday",compareStart:r().subtract(2,"days"),compareEnd:r().subtract(2,"days")},lastweek:{text:l("Last Week","ga-premium"),end:r().startOf("week"),start:r().startOf("week").subtract(6,"days"),interval:"lastweek",compareStart:r().startOf("week").subtract(13,"days"),compareEnd:r().startOf("week").subtract(7,"days")},lastmonth:{text:l("Last Month","ga-premium"),end:r().startOf("month").subtract(1,"days"),start:r().startOf("month").subtract(1,"month"),interval:"lastmonth",compareStart:r().startOf("month").subtract(2,"month"),compareEnd:r().startOf("month").subtract(1,"month").subtract(1,"days")},last7days:{text:l("Last 7 days","ga-premium"),end:r().subtract(1,"days"),start:r().subtract(7,"days"),interval:"last7days",compareStart:r().subtract(14,"days"),compareEnd:r().subtract(8,"days")},last30days:{text:l("Last 30 days","ga-premium"),end:r().subtract(1,"days"),start:r().subtract(30,"days"),interval:"last30days",compareStart:r().subtract(60,"days"),compareEnd:r().subtract(31,"days")},last90days:{text:l("Last 90 days","ga-premium"),end:r().subtract(1,"days"),start:r().subtract(90,"days"),interval:"last90days",compareStart:r().subtract(180,"days"),compareEnd:r().subtract(91,"days")}};export{Gt as D,Ft as R,y as a,$ as h,E as i};
